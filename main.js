!function(){"use strict";const e=document.querySelector(".profile-info__edit-button"),t=(document.querySelector(".profile-info__name"),document.querySelector(".profile-info__subtitle"),document.querySelector(".modal__name"),document.querySelector(".modal__description"),document.querySelector(".add-button")),s={formInputTypeErrorClass:"form__input_type_error",formInputErrorActiveClass:"form__input-error_active",formInputSelector:".form__input",formSubmitSelector:".form__submit",formSubmitInactiveClass:"form__submit_inactive",formSelector:".form"};var n=class{constructor(e,t){this._inputSelector=e.formInputSelector,this._submitButtonSelector=e.formSubmitSelector,this._inactiveButtonClass=e.formSubmitInactiveClass,this._inputErrorClass=e.formInputTypeErrorClass,this._errorClass=e.formInputErrorActiveClass,this._form=t}_setEventListeners(){this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass))}_disableButton(){this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};class i{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscUp=this._handleEscUp.bind(this)}open(){this._popupElement.classList.add("modal__open"),document.addEventListener("keyup",this._handleEscUp)}close(){this._popupElement.classList.remove("modal__open"),document.removeEventListener("keyup",this._handleEscUp)}_handleEscUp(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("close-icon"))&&this.close()}))}}class r extends i{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".form"),this._handleFormSubmit=s,this._inputList=this._popupForm.querySelectorAll(".form__input")}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const o=new n(s,document.querySelector(".modal__form")),a=new n(s,document.querySelector(".new-item-modal__form"));o.enableValidation(),a.enableValidation();const l=new class extends i{constructor(e){super(e),this._imagePopUpImage=this._popupElement.querySelector(".image-pop-up__image"),this._imagePopUpTitle=this._popupElement.querySelector(".image-pop-up__title")}open(e){this._imagePopUpImage.src=e.link,this._imagePopUpImage.alt=e.link,this._imagePopUpTitle.textContent=e.name,super.open()}}({popupSelector:".image-pop-up"});l.setEventListeners();const c=new r({popupSelector:".profile-modal",handleFormSubmit:e=>{p.setUserInfo(e)}});c.setEventListeners();const u=e=>new class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._data=e,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._cardImage.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button-active")}_handleDeleteCard(){this._element.remove()}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._addCardTitle=this._element.querySelector(".card__title"),this._cardLikeButton=this._element.querySelector(".card__like-button"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._addCardTitle.textContent=this._name,this._setEventListeners(),this._element}}(e,".card-template",(e=>{let{name:t,link:s}=e;l.open({name:t,link:s})})).getView(),m=new class{constructor(e,t){let{renderer:s,items:n}=e;this._renderer=s,this._initialArray=n,this._container=document.querySelector(t)}renderItems(){this._initialArray.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{m.addItem(u(e))},items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}]},".gallery__cards");m.renderItems();const _=new r({popupSelector:".new-item-modal",handleFormSubmit:e=>{m.addItem(u(e))}});_.setEventListeners();const p=new class{constructor(e){let{nameSelector:t,descriptionSelector:s}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=s}}({nameSelector:".profile-info__name",descriptionSelector:".profile-info__subtitle"});e.addEventListener("click",(function(){const e=p.getUserInfo();c.setInputValues(e),o.resetValidation(),c.open()})),t.addEventListener("click",(function(){a.resetValidation(),_.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQU8sTUFBTUEsRUFBYUMsU0FBU0MsY0FBYyw4QkFTcENDLEdBUGNGLFNBQVNDLGNBQWMsdUJBQ25CRCxTQUFTQyxjQUN0QywyQkFFdUJELFNBQVNDLGNBQWMsZ0JBQ2hCRCxTQUFTQyxjQUFjLHVCQUU5QkQsU0FBU0MsY0FBYyxnQkFxQ25DRSxFQUFhLENBQ3hCQyx3QkFBeUIseUJBQ3pCQywwQkFBMkIsMkJBQzNCQyxrQkFBbUIsZUFDbkJDLG1CQUFvQixnQkFDcEJDLHdCQUF5Qix3QkFDekJDLGFBQWMsU0NLaEIsSUNrQ0EsRUEzRkEsTUFDRUMsWUFBWVAsRUFBWVEsR0FDdEJDLEtBQUtDLGVBQWlCVixFQUFXRyxrQkFDakNNLEtBQUtFLHNCQUF3QlgsRUFBV0ksbUJBQ3hDSyxLQUFLRyxxQkFBdUJaLEVBQVdLLHdCQUN2Q0ksS0FBS0ksaUJBQW1CYixFQUFXQyx3QkFDbkNRLEtBQUtLLFlBQWNkLEVBQVdFLDBCQUU5Qk8sS0FBS00sTUFBUVAsQ0FDZixDQUVBUSxxQkFDRVAsS0FBS1EsZUFBaUJDLE1BQU1DLEtBQzFCVixLQUFLTSxNQUFNSyxpQkFBaUJYLEtBQUtDLGlCQUVuQ0QsS0FBS1ksY0FBZ0JaLEtBQUtNLE1BQU1qQixjQUFjVyxLQUFLRSx1QkFDbkRGLEtBQUthLHFCQUNMYixLQUFLUSxlQUFlTSxTQUFTQyxJQUMzQkEsRUFBYUMsaUJBQWlCLFNBQVMsS0FDckNoQixLQUFLaUIsb0JBQW9CRixHQUN6QmYsS0FBS2Esb0JBQW9CLEdBQ3pCLEdBRU4sQ0FFQUssZ0JBQWdCSCxHQUNkLE1BQU1JLEVBQXNCbkIsS0FBS00sTUFBTWpCLGNBQ3BDLElBQUcwQixFQUFhSyxZQUduQkwsRUFBYU0sVUFBVUMsSUFBSXRCLEtBQUtJLGtCQUNoQ2UsRUFBb0JJLFlBQWNSLEVBQWFTLGtCQUMvQ0wsRUFBb0JFLFVBQVVDLElBQUl0QixLQUFLSyxZQUN6QyxDQUVBb0IsZ0JBQWdCVixHQUNkLE1BQU1JLEVBQXNCbkIsS0FBS00sTUFBTWpCLGNBQ3BDLElBQUcwQixFQUFhSyxZQUduQkwsRUFBYU0sVUFBVUssT0FBTzFCLEtBQUtJLGtCQUNuQ2UsRUFBb0JJLFlBQWMsR0FDbENKLEVBQW9CRSxVQUFVSyxPQUFPMUIsS0FBS0ssWUFDNUMsQ0FFQVEscUJBQ01iLEtBQUsyQixvQkFDUDNCLEtBQUtZLGNBQWNnQixVQUFXLEVBQzlCNUIsS0FBS1ksY0FBY1MsVUFBVUMsSUFBSXRCLEtBQUtHLHdCQUV0Q0gsS0FBS1ksY0FBY2dCLFVBQVcsRUFDOUI1QixLQUFLWSxjQUFjUyxVQUFVSyxPQUFPMUIsS0FBS0csc0JBRTdDLENBRUEwQixpQkFDRTdCLEtBQUtZLGNBQWNnQixVQUFXLEVBQzlCNUIsS0FBS1ksY0FBY1MsVUFBVUMsSUFBSXRCLEtBQUtHLHFCQUN4QyxDQUVBd0IsbUJBQ0UsT0FBTzNCLEtBQUtRLGVBQWVzQixNQUN4QmYsSUFBa0JBLEVBQWFnQixTQUFTQyxPQUU3QyxDQUVBZixvQkFBb0JGLEdBQ2JBLEVBQWFnQixTQUFTQyxNQUd6QmhDLEtBQUt5QixnQkFBZ0JWLEdBRnJCZixLQUFLa0IsZ0JBQWdCSCxFQUl6QixDQUVBa0IsbUJBQ0VqQyxLQUFLTSxNQUFNVSxpQkFBaUIsVUFBV2tCLElBQ3JDQSxFQUFJQyxnQkFBZ0IsSUFJdEJuQyxLQUFLTyxvQkFDUCxDQUVBNkIsa0JBQ0VwQyxLQUFLUSxlQUFlTSxTQUFTQyxJQUMzQmYsS0FBS3lCLGdCQUFnQlYsRUFBYSxJQUVwQ2YsS0FBS2Esb0JBQ1AsR0N4RmEsTUFBTXdCLEVBQ25CdkMsWUFBV3dDLEdBQW9CLElBQW5CLGNBQUVDLEdBQWVELEVBQzNCdEMsS0FBS3dDLGNBQWdCcEQsU0FBU0MsY0FBY2tELEdBQzVDdkMsS0FBS3lDLGFBQWV6QyxLQUFLeUMsYUFBYUMsS0FBSzFDLEtBQzdDLENBRUEyQyxPQUNFM0MsS0FBS3dDLGNBQWNuQixVQUFVQyxJQUFJLGVBRWpDbEMsU0FBUzRCLGlCQUFpQixRQUFTaEIsS0FBS3lDLGFBQzFDLENBRUFHLFFBQ0U1QyxLQUFLd0MsY0FBY25CLFVBQVVLLE9BQU8sZUFFcEN0QyxTQUFTeUQsb0JBQW9CLFFBQVM3QyxLQUFLeUMsYUFDN0MsQ0FFQUEsYUFBYVAsR0FDWEEsRUFBSUMsaUJBRVksV0FBWkQsRUFBSVksS0FDTjlDLEtBQUs0QyxPQUVULENBRUFHLG9CQUNFL0MsS0FBS3dDLGNBQWN4QixpQkFBaUIsYUFBY2tCLEtBRTlDQSxFQUFJYyxPQUFPM0IsVUFBVTRCLFNBQVMsVUFDOUJmLEVBQUljLE9BQU8zQixVQUFVNEIsU0FBUyxnQkFFOUJqRCxLQUFLNEMsT0FDUCxHQUVKLEVDakNhLE1BQU1NLFVBQXNCYixFQUN6Q3ZDLFlBQVd3QyxHQUFzQyxJQUFyQyxjQUFFQyxFQUFhLGlCQUFFWSxHQUFrQmIsRUFDN0NjLE1BQU0sQ0FBRWIsa0JBQ1J2QyxLQUFLcUQsV0FBYXJELEtBQUt3QyxjQUFjbkQsY0FBYyxTQUNuRFcsS0FBS3NELGtCQUFvQkgsRUFDekJuRCxLQUFLdUQsV0FBYXZELEtBQUtxRCxXQUFXMUMsaUJBQWlCLGVBQ3JELENBRUFpQyxRQUNFUSxNQUFNUixRQUNONUMsS0FBS3FELFdBQVdHLE9BQ2xCLENBRUFDLGtCQUNFLE1BQU1DLEVBQWEsQ0FBQyxFQU1wQixPQUpBMUQsS0FBS3VELFdBQVd6QyxTQUFTNkMsSUFDdkJELEVBQVdDLEVBQU1DLE1BQVFELEVBQU1FLEtBQUssSUFHL0JILENBQ1QsQ0FFQUksZUFBZUMsR0FDYi9ELEtBQUt1RCxXQUFXekMsU0FBUzZDLElBQ3ZCQSxFQUFNRSxNQUFRRSxFQUFLSixFQUFNQyxLQUFLLEdBRWxDLENBRUFiLG9CQUNFSyxNQUFNTCxvQkFDTi9DLEtBQUtxRCxXQUFXckMsaUJBQWlCLFVBQVdrQixJQUMxQ0EsRUFBSUMsaUJBQ0puQyxLQUFLc0Qsa0JBQWtCdEQsS0FBS3lELG1CQUM1QnpELEtBQUs0QyxPQUFPLEdBRWhCLEVDckJGLE1BQU1vQixFQUFvQixJQUFJQyxFQUM1QjFFLEVBQ0FILFNBQVNDLGNBQWMsaUJBRW5CNkUsRUFBbUIsSUFBSUQsRUFDM0IxRSxFQUNBSCxTQUFTQyxjQUFjLDBCQUd6QjJFLEVBQWtCL0IsbUJBQ2xCaUMsRUFBaUJqQyxtQkFFakIsTUFBTWtDLEVBQW1CLElDM0JWLGNBQTZCOUIsRUFDMUN2QyxZQUFZeUMsR0FDVmEsTUFBTWIsR0FDTnZDLEtBQUtvRSxpQkFBbUJwRSxLQUFLd0MsY0FBY25ELGNBQ3pDLHdCQUVGVyxLQUFLcUUsaUJBQW1CckUsS0FBS3dDLGNBQWNuRCxjQUN6Qyx1QkFFSixDQUVBc0QsS0FBS29CLEdBQ0gvRCxLQUFLb0UsaUJBQWlCRSxJQUFNUCxFQUFLUSxLQUNqQ3ZFLEtBQUtvRSxpQkFBaUJJLElBQU1ULEVBQUtRLEtBQ2pDdkUsS0FBS3FFLGlCQUFpQjlDLFlBQWN3QyxFQUFLSCxLQUN6Q1IsTUFBTVQsTUFDUixHRFcwQyxDQUMxQ0osY0xXYyxrQktSaEI0QixFQUFpQnBCLG9CQUVqQixNQUFNMEIsRUFBdUIsSUFBSXZCLEVBQWMsQ0FDN0NYLGNMTWMsaUJLTGRZLGlCQUFtQnVCLElBQ2pCQyxFQUFTQyxZQUFZRixFQUFLLElBSTlCRCxFQUFxQjFCLG9CQUVyQixNQUFNOEIsRUFBY0MsR0FDTCxJSjdDZixNQUNFaEYsWUFBWWlFLEVBQU1nQixFQUFjQyxHQUM5QmhGLEtBQUtpRixNQUFRbEIsRUFBS0gsS0FDbEI1RCxLQUFLa0YsTUFBUW5CLEVBQUtRLEtBRWxCdkUsS0FBS21GLE1BQVFwQixFQUNiL0QsS0FBS29GLGNBQWdCTCxFQUNyQi9FLEtBQUtxRixrQkFBb0JMLENBQzNCLENBRUF6RSxxQkFDRVAsS0FBS3NGLGdCQUFnQnRFLGlCQUFpQixTQUFTLElBQzdDaEIsS0FBS3VGLG9CQUdQdkYsS0FBS3dGLFNBQ0ZuRyxjQUFjLHdCQUNkMkIsaUJBQWlCLFNBQVMsSUFBTWhCLEtBQUt5RixzQkFFeEN6RixLQUFLMEYsV0FBVzFFLGlCQUFpQixTQUFTLElBQ3hDaEIsS0FBS3FGLGtCQUFrQixDQUFFZCxLQUFNdkUsS0FBS2tGLE1BQU90QixLQUFNNUQsS0FBS2lGLFNBRTFELENBRUFNLGtCQUNFdkYsS0FBS3NGLGdCQUFnQmpFLFVBQVVzRSxPQUFPLDJCQUN4QyxDQUVBRixvQkFDRXpGLEtBQUt3RixTQUFTOUQsUUFDaEIsQ0FFQWtFLGVBTUUsT0FMcUJ4RyxTQUNsQkMsY0FBY1csS0FBS29GLGVBQ25CUyxRQUFReEcsY0FBYyxTQUN0QnlHLFdBQVUsRUFHZixDQUVBQyxVQVlFLE9BWEEvRixLQUFLd0YsU0FBV3hGLEtBQUs0RixlQUNyQjVGLEtBQUswRixXQUFhMUYsS0FBS3dGLFNBQVNuRyxjQUFjLGdCQUM5Q1csS0FBS2dHLGNBQWdCaEcsS0FBS3dGLFNBQVNuRyxjQUFjLGdCQUNqRFcsS0FBS3NGLGdCQUFrQnRGLEtBQUt3RixTQUFTbkcsY0FBYyxzQkFFbkRXLEtBQUswRixXQUFXcEIsSUFBTXRFLEtBQUtrRixNQUMzQmxGLEtBQUswRixXQUFXbEIsSUFBTXhFLEtBQUtpRixNQUMzQmpGLEtBQUtnRyxjQUFjekUsWUFBY3ZCLEtBQUtpRixNQUV0Q2pGLEtBQUtPLHFCQUVFUCxLQUFLd0YsUUFDZCxHSVRzQlYsRUxMUixrQktLc0N4QyxJQUFvQixJQUFuQixLQUFFc0IsRUFBSSxLQUFFVyxHQUFNakMsRUFDakU2QixFQUFpQnhCLEtBQUssQ0FBRWlCLE9BQU1XLFFBQU8sSUFHM0J3QixVQUdSRSxFQUFjLElFcERMLE1BQ2JuRyxZQUFXd0MsRUFBc0I0RCxHQUFtQixJQUF4QyxTQUFFQyxFQUFRLE1BQUVDLEdBQU85RCxFQUM3QnRDLEtBQUtxRyxVQUFZRixFQUNqQm5HLEtBQUtzRyxjQUFnQkYsRUFFckJwRyxLQUFLdUcsV0FBYW5ILFNBQVNDLGNBQWM2RyxFQUMzQyxDQUVBTSxjQUdFeEcsS0FBS3NHLGNBQWN4RixTQUFTZ0UsSUFDMUI5RSxLQUFLcUcsVUFBVXZCLEVBQUssR0FFeEIsQ0FFQTJCLFFBQVFDLEdBR04xRyxLQUFLdUcsV0FBV0ksUUFBUUQsRUFDMUIsR0ZpQ0EsQ0FDRVAsU0FBV3BDLElBQ1RrQyxFQUFZUSxRQUFRNUIsRUFBV2QsR0FBTSxFQUV2Q3FDLE1MOUN3QixDQUMxQixDQUNFeEMsS0FBTSxrQkFDTlcsS0FBTSxzR0FFUixDQUNFWCxLQUFNLGNBQ05XLEtBQU0seUdBRVIsQ0FDRVgsS0FBTSxpQkFDTlcsS0FBTSw0R0FFUixDQUNFWCxLQUFNLFVBQ05XLEtBQU0scUdBRVIsQ0FDRVgsS0FBTSx3QkFDTlcsS0FBTSxxR0FFUixDQUNFWCxLQUFNLGlCQUNOVyxLQUFNLHFHQUtLLG1CS3dCZjBCLEVBQVlPLGNBRVosTUFBTUksRUFBZSxJQUFJMUQsRUFBYyxDQUNyQ1gsY0x2QmMsa0JLd0JkWSxpQkFBbUJZLElBQ2pCa0MsRUFBWVEsUUFBUTVCLEVBQVdkLEdBQU0sSUFJekM2QyxFQUFhN0Qsb0JBRWIsTUFBTTRCLEVBQVcsSUcxRUYsTUFDYjdFLFlBQVd3QyxHQUF3QyxJQUF2QyxhQUFFdUUsRUFBWSxvQkFBRUMsR0FBcUJ4RSxFQUMvQ3RDLEtBQUsrRyxhQUFlM0gsU0FBU0MsY0FBY3dILEdBQzNDN0csS0FBS2dILG9CQUFzQjVILFNBQVNDLGNBQWN5SCxFQUNwRCxDQUVBRyxjQUNFLE1BQU8sQ0FDTHJELEtBQU01RCxLQUFLK0csYUFBYXhGLFlBQ3hCMkYsWUFBYWxILEtBQUtnSCxvQkFBb0J6RixZQUUxQyxDQUVBcUQsWUFBV3VDLEdBQXdCLElBQXZCLEtBQUV2RCxFQUFJLFlBQUVzRCxHQUFhQyxFQUMvQm5ILEtBQUsrRyxhQUFheEYsWUFBY3FDLEVBQ2hDNUQsS0FBS2dILG9CQUFvQnpGLFlBQWMyRixDQUN6QyxHSDBENEIsQ0FDNUJMLGFBQWMsc0JBQ2RDLG9CQUFxQiw0QkFHdkIzSCxFQUFXNkIsaUJBQWlCLFNBQVMsV0FDbkMsTUFBTTBELEVBQU9DLEVBQVNzQyxjQUN0QnhDLEVBQXFCWCxlQUFlWSxHQUNwQ1YsRUFBa0I1QixrQkFDbEJxQyxFQUFxQjlCLE1BQ3ZCLElBRUFyRCxFQUFVMEIsaUJBQWlCLFNBQVMsV0FDbENrRCxFQUFpQjlCLGtCQUNqQndFLEVBQWFqRSxNQUNmLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWluZm9fX2VkaXQtYnV0dG9uXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWluZm9fX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGUtaW5mb19fc3VidGl0bGVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19kZXNjcmlwdGlvblwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uOiBcIi5nYWxsZXJ5X19jYXJkc1wiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIuY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIHByZXZpZXdQb3B1cDogXCIuaW1hZ2UtcG9wLXVwXCIsXHJcbiAgcHJvZmlsZU1vZGFsOiBcIi5wcm9maWxlLW1vZGFsXCIsXHJcbiAgYWRkQ2FyZE1vZGFsOiBcIi5uZXctaXRlbS1tb2RhbFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1Db25maWcgPSB7XHJcbiAgZm9ybUlucHV0VHlwZUVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGZvcm1JbnB1dEVycm9yQWN0aXZlQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgZm9ybUlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgZm9ybVN1Ym1pdFNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcclxuICBmb3JtU3VibWl0SW5hY3RpdmVDbGFzczogXCJmb3JtX19zdWJtaXRfaW5hY3RpdmVcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxufTtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuXHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKClcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2FkZENhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9hZGRDYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtQ29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGZvcm1Db25maWcuZm9ybUlucHV0U2VsZWN0b3I7IC8vIC5mb3JtX19pbnB1dFxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBmb3JtQ29uZmlnLmZvcm1TdWJtaXRTZWxlY3RvcjsgLy8gLmZvcm1fX3N1Ym1pdFxyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGZvcm1Db25maWcuZm9ybVN1Ym1pdEluYWN0aXZlQ2xhc3M7IC8vIGZvcm1fX3N1Ym1pdF9pbmFjdGl2ZVxyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZm9ybUNvbmZpZy5mb3JtSW5wdXRUeXBlRXJyb3JDbGFzczsgLy8gZm9ybV9faW5wdXRfdHlwZV9lcnJvclxyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGZvcm1Db25maWcuZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzczsgLy8gZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5zb21lKFxyXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAvLyB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY1VwID0gdGhpcy5faGFuZGxlRXNjVXAuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19vcGVuXCIpO1xyXG4gICAgLy8gdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5zZXRFdmVudExpc3RlbmVycyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjVXApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19vcGVuXCIpO1xyXG4gICAgLy8gdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5zZXRFdmVudExpc3RlbmVycyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjVXApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY1VwKGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZS1pY29uXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgc2VsZWN0b3JzLFxyXG4gIGZvcm1Db25maWcsXHJcbiAgZWRpdEJ1dHRvbixcclxuICBpbnB1dE5hbWUsXHJcbiAgaW5wdXREZXNjcmlwdGlvbixcclxuICBhZGRCdXR0b24sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgZm9ybUNvbmZpZyxcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpXHJcbik7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtQ29uZmlnLFxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LWl0ZW0tbW9kYWxfX2Zvcm1cIilcclxuKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucHJldmlld1BvcHVwLFxyXG59KTtcclxuXHJcbmNhcmRQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRVc2VyUHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlTW9kYWwsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGluZm8pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGluZm8pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuZWRpdFVzZXJQcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLCAoeyBuYW1lLCBsaW5rIH0pID0+IHtcclxuICAgIGNhcmRQcmV2aWV3UG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XHJcbiAgICB9LFxyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICB9LFxyXG5cclxuICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmFkZENhcmRNb2RhbCxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZS1pbmZvX19uYW1lXCIsXHJcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZS1pbmZvX19zdWJ0aXRsZVwiLFxyXG59KTtcclxuXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlZGl0VXNlclByb2ZpbGVNb2RhbC5zZXRJbnB1dFZhbHVlcyhpbmZvKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0VXNlclByb2ZpbGVNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlUG9wVXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5pbWFnZS1wb3AtdXBfX2ltYWdlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbWFnZVBvcFVwVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuaW1hZ2UtcG9wLXVwX190aXRsZVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICB0aGlzLl9pbWFnZVBvcFVwSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2VQb3BVcEltYWdlLmFsdCA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlUG9wVXBUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgaXRlbXMgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBpdGVtcztcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgLy8gdXNlIHRoaXMuX3JlbmRlcmVyIHRvIGNyZWF0ZSB0aGUgZWxlbWVudHMgZm9yIHJlbmRlcmluZ1xyXG5cclxuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIC8vIHRha2UgdGhlIGl0ZW0gYW5kIHJlbmRlciBpdCBpbnRvIHRoaXMuX2VsZW1lbnRcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRCdXR0b24iLCJmb3JtQ29uZmlnIiwiZm9ybUlucHV0VHlwZUVycm9yQ2xhc3MiLCJmb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzIiwiZm9ybUlucHV0U2VsZWN0b3IiLCJmb3JtU3VibWl0U2VsZWN0b3IiLCJmb3JtU3VibWl0SW5hY3RpdmVDbGFzcyIsImZvcm1TZWxlY3RvciIsImNvbnN0cnVjdG9yIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfZGlzYWJsZUJ1dHRvbiIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImNhcmRQcmV2aWV3UG9wdXAiLCJfaW1hZ2VQb3BVcEltYWdlIiwiX2ltYWdlUG9wVXBUaXRsZSIsInNyYyIsImxpbmsiLCJhbHQiLCJlZGl0VXNlclByb2ZpbGVNb2RhbCIsImluZm8iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY3JlYXRlQ2FyZCIsIml0ZW0iLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9kYXRhIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRMaWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VJY29uIiwiX2VsZW1lbnQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIl9hZGRDYXJkVGl0bGUiLCJjYXJkU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJpdGVtcyIsIl9yZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJhZGRDYXJkTW9kYWwiLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJfcmVmMiJdLCJzb3VyY2VSb290IjoiIn0=